{% assign bad_content = include.bad | default: page.vulnerable_code %}
{% assign good_content = include.good | default: page.secure_code %}
{% assign bad_label = include.bad_label | default: "❌ The Vulnerability" %}
{% assign good_label = include.good_label | default: "✅ The Fix" %}

{% if bad_content and good_content %}
<div class="comparison-wrapper">
    <!-- Left: VULNERABLE CODE -->
    <div class="code-col vuln-col">
        <div class="code-header">
            <span class="label">{{ bad_label }}</span>
            <span class="badge-bad">VULNERABLE</span>
        </div>
        <div class="code-window">
            <pre><code class="language-rust">{{ bad_content | strip | escape }}</code></pre>
        </div>
    </div>

    <!-- Right: SECURE CODE -->
    <div class="code-col secure-col">
        <div class="code-header">
            <span class="label">{{ good_label }}</span>
            <span class="badge-good">SECURE</span>
        </div>
        <div class="code-window">
            <pre><code class="language-rust">{{ good_content | strip | escape }}</code></pre>
        </div>
    </div>
</div>
{% endif %}