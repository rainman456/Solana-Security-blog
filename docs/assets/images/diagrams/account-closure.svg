<!-- Unsafe Account Closure Diagram -->
<svg viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="400" fill="#f8fafc" rx="12"/>
  
  <g transform="translate(50, 50)">
    <text x="150" y="30" font-family="monospace" font-weight="bold" fill="#ef4444">❌ Vulnerable (Logic Zombie)</text>
    
    <!-- Step 1 -->
    <rect x="0" y="60" width="140" height="60" rx="6" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
    <text x="70" y="85" text-anchor="middle" font-family="sans-serif" font-size="12">Close Instruction</text>
    <text x="70" y="105" text-anchor="middle" font-family="monospace" font-size="10">transfer(all_sol)</text>
    
    <path d="M140 90 L240 90" stroke="#ef4444" stroke-width="2" marker-end="url(#arrow-vuln)"/>
    
    <!-- Result State -->
    <rect x="240" y="40" width="160" height="100" rx="6" fill="#fff" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4"/>
    <text x="320" y="65" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold">"Closed" Account</text>
    <text x="320" y="90" text-anchor="middle" font-family="monospace" font-size="10">Bal: 0 SOL</text>
    <text x="320" y="110" text-anchor="middle" font-family="monospace" font-size="10" fill="#ef4444">Data: Still Exists!</text>
    <text x="320" y="130" text-anchor="middle" font-family="monospace" font-size="10" fill="#ef4444">Owner: Program</text>
    
    <path d="M400 90 L500 90" stroke="#ef4444" stroke-width="2" marker-end="url(#arrow-vuln)"/>
    
    <rect x="500" y="60" width="140" height="60" rx="6" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
    <text x="570" y="85" text-anchor="middle" font-family="sans-serif" font-size="12">Attacker Sends SOL</text>
    <text x="570" y="105" text-anchor="middle" font-family="monospace" font-size="11" font-weight="bold">Revived!</text>
  </g>

  <g transform="translate(50, 250)">
    <text x="150" y="30" font-family="monospace" font-weight="bold" fill="#22c55e">✅ Secure (Garbage Collected)</text>
    
    <!-- Step 1 -->
    <rect x="0" y="60" width="140" height="60" rx="6" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
    <text x="70" y="85" text-anchor="middle" font-family="sans-serif" font-size="12">Close Instruction</text>
    <text x="70" y="105" text-anchor="middle" font-family="monospace" font-size="10">Anchor close constraint</text>
    
    <path d="M140 90 L240 90" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-secure)"/>
    
    <!-- Result State -->
    <rect x="240" y="40" width="160" height="100" rx="6" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <text x="320" y="65" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold">True Close</text>
    <text x="320" y="90" text-anchor="middle" font-family="monospace" font-size="10">Bal: 0 SOL</text>
    <text x="320" y="110" text-anchor="middle" font-family="monospace" font-size="10" fill="#22c55e">Data: Wiped</text>
    <text x="320" y="130" text-anchor="middle" font-family="monospace" font-size="10" fill="#22c55e">Owner: System</text>
    
    <path d="M400 90 L500 90" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow-secure-grey)"/>
    
    <rect x="500" y="60" width="140" height="60" rx="6" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <text x="570" y="95" text-anchor="middle" font-family="sans-serif" font-size="12">Cannot Revive</text>
  </g>
  
  <defs>
    <marker id="arrow-vuln" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ef4444" />
    </marker>
    <marker id="arrow-secure" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#22c55e" />
    </marker>
     <marker id="arrow-secure-grey" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#94a3b8" />
    </marker>
  </defs>
</svg>
